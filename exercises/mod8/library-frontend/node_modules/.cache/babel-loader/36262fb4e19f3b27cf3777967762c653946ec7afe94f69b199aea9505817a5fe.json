{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\alici\\\\Projets Web\\\\web3-rev\\\\exercises\\\\mod8\\\\library-frontend\\\\src\\\\components\\\\AuthorForm.js\",\n  _s = $RefreshSig$();\nimport { useMutation } from \"@apollo/client\";\nimport { useEffect, useState } from \"react\";\nimport { EDIT_AUTHOR } from \"../queries\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AuthorForm = _ref => {\n  _s();\n  let {\n    setError\n  } = _ref;\n  // allow to update birth year\n  const [name, setName] = useState('');\n  const [born, setBorn] = useState('');\n  const [editAuthor, result] = useMutation(EDIT_AUTHOR);\n  const submit = async event => {\n    event.preventDefault();\n    if (name === '') {\n      setError('name is required');\n      return;\n    }\n    if (born === '') {\n      setError('born is required');\n      return;\n    }\n    editAuthor({\n      variables: {\n        name,\n        setBornTo: parseInt(born)\n      }\n    });\n    setName('');\n    setBorn('');\n  };\n  useEffect(() => {\n    if (result.data && result.data.editAuthor === null) {\n      setError('author not found');\n    }\n  }, [result.data]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Set birthyear\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: submit,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\"name\", /*#__PURE__*/_jsxDEV(\"input\", {\n          value: name,\n          onChange: _ref2 => {\n            let {\n              target\n            } = _ref2;\n            return setName(target.value);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 45,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\"born\", /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          value: born,\n          onChange: _ref3 => {\n            let {\n              target\n            } = _ref3;\n            return setBorn(target.value);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: \"update author\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 40,\n    columnNumber: 9\n  }, this);\n};\n_s(AuthorForm, \"Od/gNRwH/s6C8Y6cDTdsdKi8Cmc=\", false, function () {\n  return [useMutation];\n});\n_c = AuthorForm;\nexport default AuthorForm;\nvar _c;\n$RefreshReg$(_c, \"AuthorForm\");","map":{"version":3,"names":["useMutation","useEffect","useState","EDIT_AUTHOR","AuthorForm","setError","name","setName","born","setBorn","editAuthor","result","submit","event","preventDefault","variables","setBornTo","parseInt","data","target","value"],"sources":["C:/Users/alici/Projets Web/web3-rev/exercises/mod8/library-frontend/src/components/AuthorForm.js"],"sourcesContent":["import {useMutation} from \"@apollo/client\";\r\nimport {useEffect, useState} from \"react\";\r\nimport {EDIT_AUTHOR} from \"../queries\";\r\n\r\nconst AuthorForm = ({setError}) => {\r\n    // allow to update birth year\r\n    const [name, setName] = useState('');\r\n    const [born, setBorn] = useState('');\r\n\r\n    const [editAuthor, result] = useMutation(EDIT_AUTHOR);\r\n\r\n\r\n\r\n    const submit = async (event) => {\r\n        event.preventDefault();\r\n\r\n        if (name === '') {\r\n            setError('name is required');\r\n            return;\r\n        }\r\n\r\n        if (born === '') {\r\n            setError('born is required');\r\n            return;\r\n        }\r\n\r\n        editAuthor({ variables: { name, setBornTo: parseInt(born) } });\r\n\r\n        setName('');\r\n        setBorn('');\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (result.data && result.data.editAuthor === null) {\r\n            setError('author not found');\r\n        }\r\n    }, [result.data]);\r\n\r\n    return (\r\n        <div>\r\n            <h2>Set birthyear</h2>\r\n            <form onSubmit={submit}>\r\n                <div>\r\n                    name\r\n                    <input\r\n                        value={name}\r\n                        onChange={({ target }) => setName(target.value)}\r\n                    />\r\n                </div>\r\n                <div>\r\n                    born\r\n                    <input\r\n                        type='number'\r\n                        value={born}\r\n                        onChange={({ target }) => setBorn(target.value)}\r\n                    />\r\n                </div>\r\n                <button type='submit'>update author</button>\r\n            </form>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default AuthorForm;"],"mappings":";;AAAA,SAAQA,WAAW,QAAO,gBAAgB;AAC1C,SAAQC,SAAS,EAAEC,QAAQ,QAAO,OAAO;AACzC,SAAQC,WAAW,QAAO,YAAY;AAAC;AAEvC,MAAMC,UAAU,GAAG,QAAgB;EAAA;EAAA,IAAf;IAACC;EAAQ,CAAC;EAC1B;EACA,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGL,QAAQ,CAAC,EAAE,CAAC;EACpC,MAAM,CAACM,IAAI,EAAEC,OAAO,CAAC,GAAGP,QAAQ,CAAC,EAAE,CAAC;EAEpC,MAAM,CAACQ,UAAU,EAAEC,MAAM,CAAC,GAAGX,WAAW,CAACG,WAAW,CAAC;EAIrD,MAAMS,MAAM,GAAG,MAAOC,KAAK,IAAK;IAC5BA,KAAK,CAACC,cAAc,EAAE;IAEtB,IAAIR,IAAI,KAAK,EAAE,EAAE;MACbD,QAAQ,CAAC,kBAAkB,CAAC;MAC5B;IACJ;IAEA,IAAIG,IAAI,KAAK,EAAE,EAAE;MACbH,QAAQ,CAAC,kBAAkB,CAAC;MAC5B;IACJ;IAEAK,UAAU,CAAC;MAAEK,SAAS,EAAE;QAAET,IAAI;QAAEU,SAAS,EAAEC,QAAQ,CAACT,IAAI;MAAE;IAAE,CAAC,CAAC;IAE9DD,OAAO,CAAC,EAAE,CAAC;IACXE,OAAO,CAAC,EAAE,CAAC;EACf,CAAC;EAEDR,SAAS,CAAC,MAAM;IACZ,IAAIU,MAAM,CAACO,IAAI,IAAIP,MAAM,CAACO,IAAI,CAACR,UAAU,KAAK,IAAI,EAAE;MAChDL,QAAQ,CAAC,kBAAkB,CAAC;IAChC;EACJ,CAAC,EAAE,CAACM,MAAM,CAACO,IAAI,CAAC,CAAC;EAEjB,oBACI;IAAA,wBACI;MAAA,UAAI;IAAa;MAAA;MAAA;MAAA;IAAA,QAAK,eACtB;MAAM,QAAQ,EAAEN,MAAO;MAAA,wBACnB;QAAA,WAAK,MAED;UACI,KAAK,EAAEN,IAAK;UACZ,QAAQ,EAAE;YAAA,IAAC;cAAEa;YAAO,CAAC;YAAA,OAAKZ,OAAO,CAACY,MAAM,CAACC,KAAK,CAAC;UAAA;QAAC;UAAA;UAAA;UAAA;QAAA,QAClD;MAAA;QAAA;QAAA;QAAA;MAAA,QACA,eACN;QAAA,WAAK,MAED;UACI,IAAI,EAAC,QAAQ;UACb,KAAK,EAAEZ,IAAK;UACZ,QAAQ,EAAE;YAAA,IAAC;cAAEW;YAAO,CAAC;YAAA,OAAKV,OAAO,CAACU,MAAM,CAACC,KAAK,CAAC;UAAA;QAAC;UAAA;UAAA;UAAA;QAAA,QAClD;MAAA;QAAA;QAAA;QAAA;MAAA,QACA,eACN;QAAQ,IAAI,EAAC,QAAQ;QAAA,UAAC;MAAa;QAAA;QAAA;QAAA;MAAA,QAAS;IAAA;MAAA;MAAA;MAAA;IAAA,QACzC;EAAA;IAAA;IAAA;IAAA;EAAA,QACL;AAEd,CAAC;AAAA,GAzDKhB,UAAU;EAAA,QAKiBJ,WAAW;AAAA;AAAA,KALtCI,UAAU;AA2DhB,eAAeA,UAAU;AAAC;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}